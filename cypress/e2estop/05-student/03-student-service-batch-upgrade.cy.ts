describe('working with student-service', () => {
  it('should redirect back', () => {
    cy.visit('/').wait(1000)
  })
  it('should batch upgrade', () => {
    cy.visit('/students/services').wait(3000)
    cy.dataGridSearch('student-services', '២០២០-២០២១')
    cy.get('.e-headercelldiv > .e-checkbox-wrapper > .e-frame').click().wait(200)
    cy.get('button#batch-upgrade')
      .click()
      .wait(1000)
    cy.selectSetting('study-year-id', '២០២០', 'b1a7d0b6-8eb6-452a-932f-69e09e5338a6')
    cy.selectSetting('service-id', 'ឡាន', '3643c159-1e78-453a-be92-db18199adde0')
    cy.selectSetting('service-detail-id', '11', '37bed53b-b71f-4e80-afcc-938465b2d362')
    cy.selectSetting('service-type-id', 'សេវាកម្មផ្សេងៗ', '8b79c5e0-96f3-44ba-81c4-6c7558bb5cc1')
    cy.selectSetting('shift-type', 'ថ្នាក់ពេញម៉ោង', 'fulltime_shift_type')
    cy.dataTestId('note').type('Note for Upgrade')
    cy.submitForm()
      .submitAssertSuccessful('ប្តូរសេវាកម្មបានជោគជ័យ')
    cy.wait(2000)
    cy.closeModal()
    cy.dataGridSearch('student-services', '២០១៩-២០២០')
    cy.wait(2000)
    cy.get('#grid-student-services_content_table tbody .e-row')
      .filter(':contains("សេវាកម្មផ្សេងៗ")')
      .should('have.length', 2)
  })
})
