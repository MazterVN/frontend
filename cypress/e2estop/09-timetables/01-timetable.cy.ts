describe('Working with roles feature by Tester Role', () => {
  Cypress.on('uncaught:exception', () => {
    return false
  })
  beforeEach(() => {
    cy.viewport(2048, 1152)
  })
  it('should redirect back', () => {
    cy.visit('/').wait(1000)
  })
  it('should list', () => {
    cy.visit('/timetables')
    cy.wait(3000)

    cy.selectSetting('study-year-id', '២០២៣-២០២៤', 'ab32b758-e0e0-4cdd-b9ee-3245e9498874')
    cy.selectSetting('subject-grouping-id', 'ថ្នាក់ទី ១០', '127d868b-e559-4657-bbf2-448096079deb')
    cy.selectSetting('service-detail-id', '10 ក', 'acbf3f40-89c8-4949-b065-1187f14a4062')
    cy.get('.\\[\\&_tr\\:last-child\\]\\:border-0 > :nth-child(1) > :nth-child(2)').click()
    // Waiting for update verify list timetable-employee with all fields had response
  })
  it('should create and update timetable-employee', () => {
    cy.visit('/timetables')
    cy.wait(3000)
    cy.selectSetting('study-year-id', '២០២២-២០២៣', '044f14f4-6c96-4730-a98e-9b6e177371df')
    cy.selectSetting('subject-grouping-id', 'ថ្នាក់ទី', '662740bc-6bf5-45ba-b5cf-e0a49df5f304')
    cy.selectSetting('service-detail-id', '1 ក', 'd2ee0617-2e25-4379-acf2-bd847ddd50e8')
    // Add timetable
    cy.dataTestId('add-time-btn').click()
    cy.wait(500)
    // Time Picker
    cy.dataTestId('time-picker-0').click()
      .find('.el-range-input')
      .last()
      .type('{selectall}8:45')
      .tab({ shift: true })
      .type('{selectall}07:00')
      .blur()
    cy.get('.confirm').click()
    // End of Time Picker
    cy.dataTestId('cell-0-0').dblclick()
    cy.selectSetting('subject-grouping-detail-0-0', 'អំណាន', '73339534-f337-4950-98fd-270a97eaedba')
    cy.dataTestId('cell-0-1').dblclick()
    cy.selectSetting('subject-grouping-detail-0-1', 'តែងសេចក្តី', '523770b1-914a-4f37-9478-653cbb5bf42f')
    cy.dataTestId('cell-0-2').dblclick()
    cy.selectSetting('subject-grouping-detail-0-2', 'សរសេរតាមអាន', 'ee51561f-4d17-4f2f-bdfa-b111f182dc94')
    cy.dataTestId('cell-0-3').dblclick()
    cy.selectSetting('subject-grouping-detail-0-3', 'មេសូត្រ', '8932bef2-b250-4730-ae85-24d73cf0dbab')
    cy.dataTestId('cell-0-4').dblclick()
    cy.selectSetting('subject-grouping-detail-0-4', 'នព្វន្ត', '07d03da9-3520-48bf-852b-3040cbcd2f92')
    cy.dataTestId('cell-0-5').dblclick()
    cy.selectSetting('subject-grouping-detail-0-5', 'ធរណីមាត្រ', '1e4ef1bc-702c-4df2-9345-2d754be1fb89')
    cy.dataTestId('cell-0-6').dblclick()
    cy.selectSetting('subject-grouping-detail-0-6', 'វិទ្យាសាស្ត្រ', 'c6bfe711-6d13-4832-a73e-b2f97dcf93b3')
    cy.wait(200)
    // Add timetable
    cy.dataTestId('add-time-btn').click()
    cy.wait(500)
    // Time Picker
    cy.dataTestId('time-picker-1').click()
      .find('.el-range-input')
      .last()
      .type('{selectall}10:45')
      .tab({ shift: true })
      .type('{selectall}09:00')
      .blur()
    cy.get('.confirm').click()
    cy.dataTestId('cell-1-0').dblclick()
    cy.selectSetting('subject-grouping-detail-1-0', 'អក្សរផ្ចង់', '52073b88-5d2a-4e2f-a919-6edd07ff23ab')
    cy.dataTestId('cell-1-1').dblclick()
    cy.selectSetting('subject-grouping-detail-1-1', 'សីលធម៌', '02f0942f-c456-43d6-9d9a-76057da6554b')
    cy.dataTestId('cell-1-2').dblclick()
    cy.selectSetting('subject-grouping-detail-1-2', 'ភូមិវិទ្យា', '5cf92e4f-a717-4741-837d-a469c07060ab')
    cy.dataTestId('cell-1-3').dblclick()
    cy.selectSetting('subject-grouping-detail-1-3', 'ប្រវត្តិវិទ្យា', '4d80988d-787e-4821-a3ca-2994ec490358')
    cy.dataTestId('cell-1-4').dblclick()
    cy.selectSetting('subject-grouping-detail-1-4', 'វិទ្យាសាស្ត្រ', 'c6bfe711-6d13-4832-a73e-b2f97dcf93b3')
    cy.dataTestId('cell-1-5').dblclick()
    cy.selectSetting('subject-grouping-detail-1-5', 'ធរណីមាត្រ', '1e4ef1bc-702c-4df2-9345-2d754be1fb89')
    cy.dataTestId('cell-1-6').dblclick()
    cy.selectSetting('subject-grouping-detail-1-6', 'នព្វន្ត', '07d03da9-3520-48bf-852b-3040cbcd2f92')

    cy.dataTestId('save-btn').click()
      .submitAssertSuccessful('បានរក្សាទុកជោគជ័យ')

    cy.dataTestId('cell-0-0').click()
    cy.openCreateModal()
    // Select Schedule
    cy.get('.e-multi-select-wrapper > .e-input-group-icon')
      .click()
      .wait(300)
    cy.get('.e-list-parent .e-list-item')
      .first()
      .click()
      .wait(300)
    cy.get('.e-multi-select-wrapper > .e-input-group-icon')
      .click()
      .wait(300)
    // End of Select Schedule
    cy.selectSetting('employee-id', 'អៀ ហ៊ុយឃឹម', 'e248ac0a-a37a-4307-8bf7-28387778dd4c')
    cy.selectSetting('type', 'បណ្តោះអាសន្ន', 'temporary_timetable_employee_type')
    cy.dateRangPicker(4)
    cy.submitForm()
      .submitAssertSuccessful('បន្ថែមបានជោគជ័យ')
    cy.closeModal()
    cy.dataTestId('cell-0-0').click()
    // End of Creation

    cy.dataGridSelectRow('timetable-employees')
    cy.openEditModal()
    // Select Schedule
    cy.get('.e-multi-select-wrapper > .e-input-group-icon')
      .click()
      .wait(300)
    cy.get('.e-list-parent .e-list-item')
      .first()
      .click()
      .wait(300)
    cy.get('.e-multi-select-wrapper > .e-input-group-icon')
      .click()
      .wait(300)
    // End of Select Schedule
    cy.selectSetting('employee-id', 'អុន សុផារី', '25c877a0-3cb9-4a44-9052-1ccda6aab3ae')
    cy.selectSetting('type', 'គ្រូបង្គោល', 'default_timetable_employee_type')
    cy.dateRangPicker(6)
    cy.submitForm()
      .submitAssertSuccessful('កែប្រែបានជោគជ័យ')
    cy.closeModal()
    cy.wait(500)

    cy.dataTestId('cell-0-6').dblclick()
    cy.selectSetting('subject-grouping-detail-0-6', 'វិទ្យាសាស្ត្រ', 'c6bfe711-6d13-4832-a73e-b2f97dcf93b3')
    cy.dataTestId('remove-time-1')
    cy.wait(200)
    // Add timetable
    cy.dataTestId('save-btn').click()
      .submitAssertSuccessful('បានរក្សាទុកជោគជ័យ')
  })
})
